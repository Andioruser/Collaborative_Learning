## 简介

内核符号表，/boot/System.map 和 /proc/kallsyms 文件用于存放内核符号表信息就是在内核的内部函数或变量中，可供外部引用的函数和变量的符号表. 它是一个索引文件，存在的目的就是让外部软件可以知道kernel文件内部实际分配的位置.

### System.map

对于内核中的没有导出的变量或者函数名，也有其相应的内核地址，该文件一般是只读的、固定大小的，没有动态添加模块中的变量、函数名.

### kallsyms

kallsyms在内核启动过程中创建，并实时更新，反映的是系统的当前最新情况，其内部也包含内核或者是已加载模块导出的函数、变量名称.

## 格式

```bash
# 小写字母表示局部引用，大写字母表示全局引用
# 线性地址        类型                      符号  
ffffffff83b624a8 d __event_call_function_exit
ffffffff83b624b0 d __event_call_function_entry
```

### 符号类型

| 符号类型 | 名称       | 说明                                                                 |
|----------|------------|----------------------------------------------------------------------|
| A        | Absolute   | 符号的值是绝对值，并且在进一步链接过程中不会被改变                |
| B        | BSS        | 符号在未初始化数据区或区（section）中，即在BSS段中                 |
| C        | Common     | 符号是公共的。公共符号是未初始化的数据。在链接时，多个公共符号可能具有同一名称。如果该符号定义在其他地方，则公共符号被看作是未定义的引用 |
| D        | Data       | 符号在已初始化数据区中                                               |
| G        | Global     | 符号是在小对象已初始化数据区中的符号。某些目标文件的格式允许对小数据对象（例如一个全局整型变量）可进行更有效的访问 |
| I        | Indirect   | 符号是对另一个符号的间接引用                                         |
| N        | Debugging  | 符号是一个调试符号                                                   |
| R        | Read only  | 符号在一个只读数据区中                                               |
| S        | Small      | 符号是小对象未初始化数据区中的符号                                   |
| T        | Text       | 符号是代码区中的符号                                                 |
| U        | Undefined  | 符号是外部的，并且其值为0（未定义）                                   |
| -        | Stabs      | 符号是a.out目标文件中的一个stab符号，用于保存调试信息               |
| ?        | Unknown    | 符号的类型未知，或者与具体文件格式有关                               |

## References

1. CSDN: https://blog.csdn.net/wuyongpeng0912/article/details/46744651